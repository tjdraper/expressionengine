<!DOCTYPE html>



<html>
	<head>
		<meta http-equiv="content-type" content="text/html" charset="utf-8" dir="ltr" lang="en-us">
	    
	    <title>CP Class &mdash; ExpressionEngine 4.0.0-dp.2 documentation</title>

	    <meta name="viewport" content="initial-scale=1">

	    <link rel="stylesheet" href="../../../_static/asset/css/default.min.css" type="text/css" />
	    <script type="text/javascript">
	      var DOCUMENTATION_OPTIONS = {
	        URL_ROOT:    '../../../',
	        VERSION:     '4.0.0-dp.2',
	        COLLAPSE_INDEX: false,
	        FILE_SUFFIX: '.html',
	        HAS_SOURCE:  true
	      };
	    </script>
	    <link rel="top" title="ExpressionEngine 4.0.0-dp.2 documentation" href="../../../index.html" />
	    <link rel="up" title="Libraries" href="index.html" />
	    <link rel="next" title="Creating Libraries" href="creating_libraries.html" />
	    <link rel="prev" title="Config Class" href="config.html" /> 
	</head>
	<body id="top">
		<section class="fill">
			<section class="row align-right fluid-fix">
				<section class="w-12 fluid-col" id="docs-main">
					<div class="box docs-wrap">
						<nav class="ver-nav">
							Switch to:
							<a href="https://docs.expressionengine.com/latest/"><b>v3</b> (Latest)</a>
							<a href="https://docs.expressionengine.com/v2/"><b>v2</b></a>
							<a href="https://docs.expressionengine.com/v1/"><b>v1</b></a>
						</nav>
						<div class="docs-header">
							<a class="small-menu" href="#docs-nav"></a>
							<h1>ExpressionEngine&reg; User Guide</h1>
							<form class="docs-download">
								<select>
									<option value="">Download&hellip;</option>
									<option value="https://docs.expressionengine.com/downloads/v3">Download v3 User Guide</option>
									<option value="https://docs.expressionengine.com/downloads/v2">Download v2 User Guide</option>
									<option value="https://docs.expressionengine.com/downloads/v1">Download v1 User Guide</option>
								</select>
							</form>
							<script>
								document.querySelector('.docs-download select').onchange = function() {
									window.location.href = this.value;
								};
							</script>
						</div>
						<div class="top-nav">
							<ul class="breadcrumb">
								<li><a href="../../../index.html">Home</a></li>
								<li><a href="../../index.html" >Add-On Development</a></li>
								<li><a href="../index.html" >Legacy Reference</a></li>
								<li><a href="index.html" accesskey="U">Libraries</a></li>
								<li class="last">CP Class</li>
							</ul>
						</div>
						<div id="content">
						<div class="section" id="cp-class">
<h1>CP Class<a class="headerlink" href="#cp-class" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#calling-the-cp-class" id="id1">Calling the CP Class</a></li>
<li><a class="reference internal" href="#breadcrumbs" id="id2">Breadcrumbs</a></li>
<li><a class="reference internal" href="#sub-navigation" id="id3">Sub Navigation</a></li>
<li><a class="reference internal" href="#set-variables" id="id4">Set Variables</a></li>
<li><a class="reference internal" href="#adding-header-data" id="id5">Adding Header Data</a></li>
<li><a class="reference internal" href="#add-javascript-files-to-the-javascript-combo-loader" id="id6">Add JavaScript Files to the JavaScript Combo Loader</a></li>
<li><a class="reference internal" href="#loading-third-party-javascript-files" id="id7">Loading Third-Party JavaScript Files</a></li>
<li><a class="reference internal" href="#masking-the-control-panel-url-in-links" id="id8">Masking the Control Panel URL in links</a></li>
<li><a class="reference internal" href="#allowed-group" id="id9">Allowed Group</a></li>
<li><a class="reference internal" href="#safe-refresh" id="id10">Safe Refresh</a></li>
<li><a class="reference internal" href="#fetch-an-action-id" id="id11">Fetch an Action ID</a></li>
<li><a class="reference internal" href="#publish-page-layout-methods" id="id12">Publish Page Layout Methods</a></li>
</ul>
</div>
<div class="section" id="calling-the-cp-class">
<h2><a class="toc-backref" href="#id1">Calling the CP Class</a><a class="headerlink" href="#calling-the-cp-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="Cp">
<em class="property">class </em><code class="descname">Cp</code><a class="headerlink" href="#Cp" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is initialized automatically in the control panel.</p>
</dd></dl>

</div>
<div class="section" id="breadcrumbs">
<h2><a class="toc-backref" href="#id2">Breadcrumbs</a><a class="headerlink" href="#breadcrumbs" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="Cp::set_breadcrumb">
<code class="descclassname">Cp::</code><code class="descname">set_breadcrumb</code><span class="sig-paren">(</span><em>$link</em>, <em>$title</em><span class="sig-paren">)</span><a class="headerlink" href="#Cp::set_breadcrumb" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new breadcrumb to the initial breadcrumb array. The system will
automatically output the final array:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">set_breadcrumb</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$title</span><span class="p">);</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$link</strong> (<em>type</em>) &#8211; URL the breadcrumb should go to</li>
<li><strong>$title</strong> (<em>type</em>) &#8211; Text to go in the link</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Void</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="sub-navigation">
<h2><a class="toc-backref" href="#id3">Sub Navigation</a><a class="headerlink" href="#sub-navigation" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="Cp::set_right_nav">
<code class="descclassname">Cp::</code><code class="descname">set_right_nav</code><span class="sig-paren">(</span><em>$nav = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#Cp::set_right_nav" title="Permalink to this definition">¶</a></dt>
<dd><p>The right hand subnavigation can be used as the main navigation for a
module. This method takes an associative array where the keys are
language keys and the values are the full url to link to:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">set_right_nav</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;edit_avatar&#39;</span> <span class="o">=&gt;</span> <span class="nx">BASE</span><span class="o">.</span><span class="nx">AMP</span><span class="o">.</span><span class="s1">&#39;C=my_account&#39;</span><span class="o">.</span><span class="nx">AMP</span><span class="o">.</span><span class="s1">&#39;M=edit_avatar&#39;</span><span class="p">,</span>
    <span class="s1">&#39;edit_profile&#39;</span> <span class="o">=&gt;</span> <span class="nx">BASE</span><span class="o">.</span><span class="nx">AMP</span><span class="o">.</span><span class="s1">&#39;C=my_account&#39;</span><span class="o">.</span><span class="nx">AMP</span><span class="o">.</span><span class="s1">&#39;M=edit_profile&#39;</span>
<span class="p">));</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$nav</strong> (<em>array</em>) &#8211; Associative array containing pairs of language keys
as the keys and URLs as the values</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Void</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="set-variables">
<h2><a class="toc-backref" href="#id4">Set Variables</a><a class="headerlink" href="#set-variables" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="Cp::set_variable">
<code class="descclassname">Cp::</code><code class="descname">set_variable</code><span class="sig-paren">(</span><em>$name</em>, <em>$value</em><span class="sig-paren">)</span><a class="headerlink" href="#Cp::set_variable" title="Permalink to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified">Deprecated since version 2.6: </span>Use <code class="docutils literal"><span class="pre">$this-&gt;EE-&gt;view-&gt;cp_page_title</span> <span class="pre">=</span> <span class="pre">'...'</span></code> instead.</p>
</div>
<p>This is a simple alternative for setting a page variable. It is used
almost exclusively for setting the title of a control panel page:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">EE</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">set_variable</span><span class="p">(</span><span class="s1">&#39;cp_page_title&#39;</span><span class="p">,</span> <span class="nx">lang</span><span class="p">(</span><span class="s1">&#39;page_title&#39;</span><span class="p">));</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$name</strong> (<em>string</em>) &#8211; Name of the variable to set</li>
<li><strong>$value</strong> (<em>string</em>) &#8211; Value to set</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Void</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="adding-header-data">
<h2><a class="toc-backref" href="#id5">Adding Header Data</a><a class="headerlink" href="#adding-header-data" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="Cp::add_to_head">
<code class="descclassname">Cp::</code><code class="descname">add_to_head</code><span class="sig-paren">(</span><em>$data</em><span class="sig-paren">)</span><a class="headerlink" href="#Cp::add_to_head" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal"><span class="pre">&lt;head&gt;</span></code> tag of the control panel can be extended with new
styles, meta tags, and other data. Multiple calls to this method are
additive:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">add_to_head</span><span class="p">(</span><span class="s1">&#39;&lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;div { display: none; }&lt;/style&gt;&#39;</span><span class="p">);</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$data</strong> (<em>string</em>) &#8211; String to add to the <code class="docutils literal"><span class="pre">&lt;head&gt;</span></code> of the control
panel</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Void</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="add-javascript-files-to-the-javascript-combo-loader">
<h2><a class="toc-backref" href="#id6">Add JavaScript Files to the JavaScript Combo Loader</a><a class="headerlink" href="#add-javascript-files-to-the-javascript-combo-loader" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="Cp::add_js_script">
<code class="descclassname">Cp::</code><code class="descname">add_js_script</code><span class="sig-paren">(</span><em>$script_type</em>, <em>$script_name</em><span class="sig-paren">)</span><a class="headerlink" href="#Cp::add_js_script" title="Permalink to this definition">¶</a></dt>
<dd><p>This method allows you to include scripts found in the main
JavaScript directory in the combo load routine, thus reducing HTTP
requests. As an example, the call to load <code class="docutils literal"><span class="pre">filename.js</span></code> file from
the <code class="docutils literal"><span class="pre">themes/javascript</span></code> directory would look like this:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">add_js_script</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="s1">&#39;filename&#39;</span><span class="p">);</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$script_type</strong> (<em>string</em>) &#8211; Type of script to load</li>
<li><strong>$script_name</strong> (<em>string</em>) &#8211; Name of script to load</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Associative array of loaded js files</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Array</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method will only load files from
the <code class="docutils literal"><span class="pre">themes/javascript</span></code> directory. To load a third-party add-on
package&#8217;s JavaScript files, use <a class="reference internal" href="#Cp::load_package_js" title="Cp::load_package_js"><code class="xref php php-meth docutils literal"><span class="pre">Cp::load_package_js</span></code></a>.</p>
</div>
<p>Several custom jQuery plugins are included with ExpressionEngine and
available for third-party developers to use. Plugins available include
<a class="reference internal" href="../../cp_javascript/events.html#jquery-interact"><span class="std std-ref">ee_interact.event</span></a>, <a class="reference external" href="http://tablesorter.com/docs/">tablesorter</a>, <a class="reference internal" href="../../cp_javascript/table.html"><span class="doc">ee_table</span></a>, and <a class="reference internal" href="../../cp_javascript/rte/wysihat_api.html"><span class="doc">wysihat</span></a>.</p>
<p>An example call to load one of the jQuery plugins:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">add_js_script</span><span class="p">(</span><span class="s1">&#39;plugin&#39;</span><span class="p">,</span> <span class="s1">&#39;tablesorter&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>The <a class="reference external" href="http://jqueryui.com">jQuery UI</a> interactions and widgets are
also included with ExpressionEngine for third-party developers to use.
The call to load the jQuery UI Autocomplete plugin would look like
this, for example:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">add_js_script</span><span class="p">(</span><span class="s1">&#39;ui&#39;</span><span class="p">,</span> <span class="s1">&#39;autocomplete&#39;</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descclassname">Cp::</code><code class="descname">add_js_script</code><span class="sig-paren">(</span><span class="optional">[</span><em>$script = array()</em><span class="optional">[</span>, <em>$in_footer = TRUE</em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span></dt>
<dd><p>Several scripts can be included in a single call as an array:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">add_js_script</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;ui&#39;</span>      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;widget&#39;</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span><span class="p">,</span> <span class="s1">&#39;autocomplete&#39;</span><span class="p">),</span>
        <span class="s1">&#39;plugins&#39;</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;ee_notice&#39;</span><span class="p">,</span> <span class="s1">&#39;ee_table&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$script</strong> (<em>array</em>) &#8211; Associative array containing the scripts you
need to load</li>
<li><strong>$in_footer</strong> (<em>boolean</em>) &#8211; Adds to the footer if set to <code class="docutils literal"><span class="pre">TRUE</span></code>,
otherwise it&#8217;s added to the <code class="docutils literal"><span class="pre">&lt;head&gt;</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Associative array of loaded js files</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="loading-third-party-javascript-files">
<h2><a class="toc-backref" href="#id7">Loading Third-Party JavaScript Files</a><a class="headerlink" href="#loading-third-party-javascript-files" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="Cp::load_package_js">
<code class="descclassname">Cp::</code><code class="descname">load_package_js</code><span class="sig-paren">(</span><em>$file</em><span class="sig-paren">)</span><a class="headerlink" href="#Cp::load_package_js" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this method to load a third-party add-on package&#8217;s JavaScript files:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">load_package_js</span><span class="p">(</span><span class="s1">&#39;my_file&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>This will load from the current package&#8217;s <code class="docutils literal"><span class="pre">javascript</span></code> directory:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nb">system</span><span class="o">/</span><span class="nx">user</span><span class="o">/</span><span class="nx">addons</span><span class="o">/</span><span class="nx">my_package</span><span class="o">/</span><span class="nx">javascript</span><span class="o">/</span><span class="nx">my_file</span><span class="o">.</span><span class="nx">js</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$file</strong> (<em>string</em>) &#8211; JavaScript file to load, path relative to the current package&#8217;s JavaScript directory</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Void</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="masking-the-control-panel-url-in-links">
<h2><a class="toc-backref" href="#id8">Masking the Control Panel URL in links</a><a class="headerlink" href="#masking-the-control-panel-url-in-links" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="Cp::masked_url">
<code class="descclassname">Cp::</code><code class="descname">masked_url</code><span class="sig-paren">(</span><em>$url</em><span class="sig-paren">)</span><a class="headerlink" href="#Cp::masked_url" title="Permalink to this definition">¶</a></dt>
<dd><p>When creating external links in the users Control Panel, the system
folder should not show in server referral logs:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">masked_url</span><span class="p">(</span><span class="s1">&#39;http://example.com&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Creates the a the following link:
<code class="docutils literal"><span class="pre">http://example.com/index.php?URL=http://example.com</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$url</strong> (<em>string</em>) &#8211; URL to mask</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The masked URL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">String</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="allowed-group">
<h2><a class="toc-backref" href="#id9">Allowed Group</a><a class="headerlink" href="#allowed-group" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="Cp::allowed_group">
<code class="descclassname">Cp::</code><code class="descname">allowed_group</code><span class="sig-paren">(</span><em>$which</em><span class="sig-paren">)</span><a class="headerlink" href="#Cp::allowed_group" title="Permalink to this definition">¶</a></dt>
<dd><p>When a user or logged in member visits an EE site, the Session class
ascribes user data to them that, among other things, pertains to their
member groups&#8217;s access to various parts of the site. Returns <code class="docutils literal"><span class="pre">FALSE</span></code>
if they have access, <code class="docutils literal"><span class="pre">TRUE</span></code> if they do:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">allowed_group</span><span class="p">(</span><span class="s1">&#39;can_delete_all_entries&#39;</span><span class="p">))</span>
<span class="p">{</span>
    <span class="nx">show_error</span><span class="p">(</span><span class="nx">lang</span><span class="p">(</span><span class="s1">&#39;unauthorized_to_delete_others&#39;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$which</strong> (<em>string</em>) &#8211; permission string to check for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">TRUE</span></code> if they have access, <code class="docutils literal"><span class="pre">FALSE</span></code> if they don&#8217;t or if
the permission doesn&#8217;t exist</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">String</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="safe-refresh">
<h2><a class="toc-backref" href="#id10">Safe Refresh</a><a class="headerlink" href="#safe-refresh" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="Cp::get_safe_refresh">
<code class="descclassname">Cp::</code><code class="descname">get_safe_refresh</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Cp::get_safe_refresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Some pages of the control panel can only be reached after the user
submits a form. If you need to perform an action elsewhere and the
redirect to the current page, <code class="docutils literal"><span class="pre">get_safe_refresh()</span></code> will return a url
that takes these considerations into account. To use the result,
prefix it with <code class="docutils literal"><span class="pre">BASE.AMP</span></code>:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?=</span><span class="nx">form_open</span><span class="p">(</span>
    <span class="s1">&#39;C=myaccount&#39;</span><span class="o">.</span><span class="nx">AMP</span><span class="o">.</span><span class="s1">&#39;M=notepad_update&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;notepad_form&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;redirect_to&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">get_safe_refresh</span><span class="p">())</span>
<span class="p">)</span><span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">URL to the current page unless <code class="docutils literal"><span class="pre">POST</span></code> data exists, in that
case it goes to the root controller</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">String</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="fetch-an-action-id">
<h2><a class="toc-backref" href="#id11">Fetch an Action ID</a><a class="headerlink" href="#fetch-an-action-id" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="Cp::fetch_action_id">
<code class="descclassname">Cp::</code><code class="descname">fetch_action_id</code><span class="sig-paren">(</span><em>$class</em>, <em>$method</em><span class="sig-paren">)</span><a class="headerlink" href="#Cp::fetch_action_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Modules have certain actions for forms, links, etc. that are
recognized via an action ids that are inserted into the database upon
installation of that module. This method returns the action id
number from the database. (See also <a class="reference internal" href="functions.html#fetch-action-id"><span class="std std-ref">functions-&gt;fetch_action_id</span></a>):</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$aid</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">EE</span><span class="o">-&gt;</span><span class="na">cp</span><span class="o">-&gt;</span><span class="na">fetch_action_id</span><span class="p">(</span><span class="nv">$class</span><span class="p">,</span> <span class="nv">$method</span><span class="p">);</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$class</strong> (<em>string</em>) &#8211; Class that contains the method</li>
<li><strong>$method</strong> (<em>string</em>) &#8211; Name of the method</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Action ID</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Integer</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="publish-page-layout-methods">
<h2><a class="toc-backref" href="#id12">Publish Page Layout Methods</a><a class="headerlink" href="#publish-page-layout-methods" title="Permalink to this headline">¶</a></h2>
<p>Administrators may extensively customize publish pages on a per member
group and per channel basis. Since these custom layouts are saved as a
serialized array in the database, any additions or deletions to publish
page tabs and fields must be synced to any saved layouts. The control
panel library provides 4 methods to facilitate custom layout updates.
(See also <a class="reference internal" href="../../modules.html#tab-file-function-reference"><span class="std std-ref">Tab File Function Reference</span></a>)</p>
</div>
</div>

						</div>
						<div class="docs-footer">
							<p><a href="https://expressionengine.com/support/bugs/new">Report a problem with this page</a><br>
								ExpressionEngine<b class="reg-mark">&reg;</b> 4.0.0-dp.2 User Guide<br><span>&copy;2002–2017 <a href="https://ellislab.com/" rel="external">EllisLab, Inc.</a></span></p>
							<p><a class="scroll" href="#top"></a></p>
						</div>

					</div>
				</section>

				<section class="w-4 fixed-col" id="docs-nav">
					<div class="box docs-sidebar">
						<form class="docs-search" method="get" action="https://docs.expressionengine.com/search/latest/">
							<input type="text" name="q" id="q" placeholder="search eecms docs">
						</form>

						<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation &amp; Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cp/index.html">The Control Panel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../add-ons/index.html">Add-Ons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../channel/index.html">Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../comment/index.html">Comment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fieldtypes/index.html">Fieldtypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../member/index.html">Member Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../msm/index.html">Multiple Site Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../optimization/index.html">Optimizing ExpressionEngine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Securing ExpressionEngine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../templates/index.html">Template Language Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../urls/index.html">URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../how_to/index.html">How-To Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Add-On Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../v4_addon_migration.html">v4 Add-on Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v3_addon_migration/index.html">v3 Add-on Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../addon_setup_php_file.html">The <code class="docutils literal"><span class="pre">addon.setup.php</span></code> File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../core/index.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../services/index.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shared_form_view.html">Shared Form View</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../constants.html">Constants Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions.html">Extensions Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../fieldtypes.html">Fieldtypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rte_tools.html">RTE Tools API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cp_javascript/index.html">Control Panel Javascript Reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Legacy Reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../database/index.html">Database Driver</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Libraries</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="benchmark.html">Benchmarking Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="cache.html">Cache Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="config.html">Config Class</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">CP Class</a><ul class="simple">
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="creating_libraries.html">Creating Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html">Database Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="email.html">Email Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="file_field.html">File Field Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="file_uploading.html">File Uploading Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="form_validation.html">Form Validation Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="functions.html">Functions Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="image_lib.html">Image Manipulation Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="input.html">Input Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="javascript.html">Javascript Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="language.html">Language Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="layout.html">Layout Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="loader.html">Loader Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="localization.html">Localize Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="logger.html">Logger Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="mime_type.html">Mime Type Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="output.html">Output Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="pagination.html">Pagination Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="rss_parser.html">RSS Parser Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html">Security Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="session.html">Session Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="table.html">Table Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="template.html">Template Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="typography.html">Typography Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="uri.html">URI Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="xmlparser.html">XML Parser Class</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../helpers/index.html">Helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../models.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../controllers.html">Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../drivers.html">Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html">Legacy API Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common_functions.html">Common Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../guidelines/index.html">Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/tree_datastructure.html">Tree Datastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../emoticons.html">Emoticon Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer_preview_program.html">Developer Preview Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../json_version_feed.html">JSON Version Feed</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../general/index.html">General Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bugs_and_security_reports/index.html">Bugs and Security Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/changelog.html">ExpressionEngine 4.x Change Log</a></li>
</ul>

					</div>
				</section>
			</section>
		</section>
		<script type="text/javascript" src="../../../_static/jquery.js"></script>
		<script type="text/javascript" src="../../../_static/underscore.js"></script>
		<script type="text/javascript" src="../../../_static/doctools.js"></script>
		<script type="text/javascript" src="../../../_static/asset/js/common.js"></script>
		<script>
		!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
		n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
		n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
		t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
		document,'script','https://connect.facebook.net/en_US/fbevents.js');
		fbq('init', '565259520351602'); // Insert your pixel ID here.
		fbq('track', 'PageView');
		</script>
		<noscript><img height="1" width="1" style="display:none"
		src="https://www.facebook.com/tr?id=565259520351602&ev=PageView&noscript=1"
		/></noscript>
	</body>
</html>