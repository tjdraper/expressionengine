<!DOCTYPE html>



<html>
	<head>
		<meta http-equiv="content-type" content="text/html" charset="utf-8" dir="ltr" lang="en-us">
	    
	    <title>Table Class &mdash; ExpressionEngine 4.0.0-dp.2 documentation</title>

	    <meta name="viewport" content="initial-scale=1">

	    <link rel="stylesheet" href="../../../_static/asset/css/default.min.css" type="text/css" />
	    <script type="text/javascript">
	      var DOCUMENTATION_OPTIONS = {
	        URL_ROOT:    '../../../',
	        VERSION:     '4.0.0-dp.2',
	        COLLAPSE_INDEX: false,
	        FILE_SUFFIX: '.html',
	        HAS_SOURCE:  true
	      };
	    </script>
	    <link rel="top" title="ExpressionEngine 4.0.0-dp.2 documentation" href="../../../index.html" />
	    <link rel="up" title="Libraries" href="index.html" />
	    <link rel="next" title="Template Class" href="template.html" />
	    <link rel="prev" title="Session Class" href="session.html" /> 
	</head>
	<body id="top">
		<section class="fill">
			<section class="row align-right fluid-fix">
				<section class="w-12 fluid-col" id="docs-main">
					<div class="box docs-wrap">
						<nav class="ver-nav">
							Switch to:
							<a href="https://docs.expressionengine.com/latest/"><b>v3</b> (Latest)</a>
							<a href="https://docs.expressionengine.com/v2/"><b>v2</b></a>
							<a href="https://docs.expressionengine.com/v1/"><b>v1</b></a>
						</nav>
						<div class="docs-header">
							<a class="small-menu" href="#docs-nav"></a>
							<h1>ExpressionEngine&reg; User Guide</h1>
							<form class="docs-download">
								<select>
									<option value="">Download&hellip;</option>
									<option value="https://docs.expressionengine.com/downloads/v3">Download v3 User Guide</option>
									<option value="https://docs.expressionengine.com/downloads/v2">Download v2 User Guide</option>
									<option value="https://docs.expressionengine.com/downloads/v1">Download v1 User Guide</option>
								</select>
							</form>
							<script>
								document.querySelector('.docs-download select').onchange = function() {
									window.location.href = this.value;
								};
							</script>
						</div>
						<div class="top-nav">
							<ul class="breadcrumb">
								<li><a href="../../../index.html">Home</a></li>
								<li><a href="../../index.html" >Add-On Development</a></li>
								<li><a href="../index.html" >Legacy Reference</a></li>
								<li><a href="index.html" accesskey="U">Libraries</a></li>
								<li class="last">Table Class</li>
							</ul>
						</div>
						<div id="content">
						<div class="section" id="table-class">
<h1>Table Class<a class="headerlink" href="#table-class" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#calling-the-table-class" id="id1">Calling the Table Class</a></li>
<li><a class="reference internal" href="#example-improving-usability-for-large-amounts-of-data" id="id2">Example: Improving Usability for Large Amounts of Data</a></li>
<li><a class="reference internal" href="#method-reference" id="id3">Method Reference</a></li>
</ul>
</div>
<div class="section" id="calling-the-table-class">
<h2><a class="toc-backref" href="#id1">Calling the Table Class</a><a class="headerlink" href="#calling-the-table-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="Table">
<em class="property">class </em><code class="descname">Table</code><a class="headerlink" href="#Table" title="Permalink to this definition">¶</a></dt>
<dd><p>The Table class provides a simplified means to quickly build html
tables that usually require a large amount of boilerplate code. The
base functionality for the Table class is inherited from the
corresponding CodeIgniter library. Refer to the <a class="reference external" href="https://ellislab.com/codeigniter /user-guide/libraries/table.html">HTML Table</a> documentation in the
CodeIgniter user guide for details on basic table creation.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">load</span><span class="o">-&gt;</span><span class="na">library</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="example-improving-usability-for-large-amounts-of-data">
<h2><a class="toc-backref" href="#id2">Example: Improving Usability for Large Amounts of Data</a><a class="headerlink" href="#example-improving-usability-for-large-amounts-of-data" title="Permalink to this headline">¶</a></h2>
<p>This document will walk you through an example of how to add this
functionality step-by-step, starting from a basic table. For more
general documentation, refer to the method reference below.</p>
<p>When dealing with large amounts of data, displaying a single table will
almost always lead to bad usability and performance. The Table class
allows you to take a few additional steps to add Ajax pagination, column
sorting, and responsive live filtering.</p>
<div class="section" id="named-columns">
<h3>Named Columns<a class="headerlink" href="#named-columns" title="Permalink to this headline">¶</a></h3>
<p>For the sake of example, we assume that we have a very bland existing
table. In your add-on this will probably be more complex, with
potentially thousands of rows coming from the database.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">set_heading</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Color&#39;</span><span class="p">,</span> <span class="s1">&#39;Size&#39;</span><span class="p">);</span>

<span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">add_row</span><span class="p">(</span><span class="s1">&#39;Fred&#39;</span><span class="p">,</span> <span class="s1">&#39;Blue&#39;</span><span class="p">,</span> <span class="s1">&#39;Small&#39;</span><span class="p">);</span>
<span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">add_row</span><span class="p">(</span><span class="s1">&#39;Mary&#39;</span><span class="p">,</span> <span class="s1">&#39;Red&#39;</span><span class="p">,</span> <span class="s1">&#39;Large&#39;</span><span class="p">);</span>
<span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">add_row</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;Green&#39;</span><span class="p">,</span> <span class="s1">&#39;Medium&#39;</span><span class="p">);</span>

<span class="k">echo</span> <span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">();</span>
</pre></div>
</div>
<p>To start out we need to add some structure to our row and column setup.
This will allow us to assign sort and filtering preferences later. Most
importantly, we want to get to a point where we can access individual
data points in a row through an identifying key. To achieve this goal,
we want to name our columns, instead of just specifying headings. Change
the first line to use <code class="docutils literal"><span class="pre">set_columns()</span></code> instead of <code class="docutils literal"><span class="pre">set_heading()</span></code>.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">set_columns</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;name&#39;</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;header&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Name&#39;</span><span class="p">),</span>
    <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;header&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Color&#39;</span><span class="p">),</span>
    <span class="s1">&#39;size&#39;</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;header&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Size&#39;</span><span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>Let&#8217;s add this same structure to our data and pass it to <cite>set_data()</cite> instead
of <cite>set_columns()</cite>.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">set_data</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Fred&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Blue&#39;</span><span class="p">,</span>  <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Small&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Mary&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Red&#39;</span><span class="p">,</span>   <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Large&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Green&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Medium&#39;</span><span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
<p>Initially this may seem more verbose than the original, but with
database results this format is actually easier to achieve. You can
simply call <code class="docutils literal"><span class="pre">result_array()</span></code> on the result object.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Your table should now be fully sortable, try clicking on a header to
see it in action!</p>
</div>
</div></blockquote>
</div>
<div class="section" id="using-a-datasource">
<h3>Using a Datasource<a class="headerlink" href="#using-a-datasource" title="Permalink to this headline">¶</a></h3>
<p>If we try to add asynchronous elements to this setup, we will quickly
run into a lot of boilerplate code to check what data we need to return
to the browser, what format it expects, and then a conversion to that
format. By moving our data to separate datasource method we can make the
Table class do the heavy lifting for us.</p>
<p>Additionally, it lets us keep the sorting, filtering, and pagination
logic separate from our main page setup code. A datasource is simply a
new method on your current class. This method should return our filtered
and sorted data. To allow the Table class to handle our ajax request we
need to agree on a return structure. The table class accepts several
values in return argument, but for now we will just return the required
<code class="docutils literal"><span class="pre">rows</span></code>.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">_datasource</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$rows</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Fred&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Blue&#39;</span><span class="p">,</span>  <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Small&#39;</span><span class="p">),</span>
        <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Mary&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Red&#39;</span><span class="p">,</span>   <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Large&#39;</span><span class="p">),</span>
        <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Green&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Medium&#39;</span><span class="p">),</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rows&#39;</span> <span class="o">=&gt;</span> <span class="nv">$rows</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Of course, we need to tell the Table class where to look for the data.
So our old <code class="docutils literal"><span class="pre">set_data()</span></code> and <code class="docutils literal"><span class="pre">generate()</span></code> calls change into a single
pointer to the datasource.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">datasource</span><span class="p">(</span><span class="s1">&#39;_datasource&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;table_html&#39;</span><span class="p">];</span>
</pre></div>
</div>
<p>Remember that our asynchronous calls will stop here, so the Table class
has everything it needs to build the HTML at this point. It does so on
all calls and will return the initial table html to you. You no longer
need to call <code class="docutils literal"><span class="pre">generate()</span></code>.</p>
</div>
<div class="section" id="pagination">
<h3>Pagination<a class="headerlink" href="#pagination" title="Permalink to this headline">¶</a></h3>
<p>The real fun begins when we start to add dynamic elements to our table.
To show this we will add some fake pagination to our table. This will
require a little more work on our datasource. Every datasource receives
information about the table&#8217;s current state in its first parameter. One
of the elements this contains is the current page offset.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">_datasource</span><span class="p">(</span><span class="nv">$state</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$offset</span> <span class="o">=</span> <span class="nv">$state</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">];</span>
</pre></div>
</div>
<p>Let&#8217;s use that information to cut down our data to just the expected
row. We will also return the total rows and some basic configuration
that is required by the pagination class.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;rows&#39;</span> <span class="o">=&gt;</span> <span class="nb">array_slice</span><span class="p">(</span><span class="nv">$rows</span><span class="p">,</span> <span class="nv">$offset</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="s1">&#39;pagination&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;per_page&#39;</span>   <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;total_rows&#39;</span> <span class="o">=&gt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$rows</span><span class="p">),</span>
    <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Lastly, our pagination html will be added in the same way that we
received our table html, so let&#8217;s output that.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">datasource</span><span class="p">(</span><span class="s1">&#39;_datasource&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;table_html&#39;</span><span class="p">];</span>
<span class="k">echo</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;pagination_html&#39;</span><span class="p">];</span>
</pre></div>
</div>
<p>If everything went as planned we should now have a table that spans
three pages and paginates without refreshing.</p>
<p><strong>What happened to our sorting?</strong></p>
<p>Now that we have split our data across multiple pages, the table
javascript no longer has enough information to simply sort on the table
contents. It is now trying to pass sort information to our datasource.
Let&#8217;s add the code to handle that now.</p>
</div>
<div class="section" id="datasource-sorting">
<h3>Datasource Sorting<a class="headerlink" href="#datasource-sorting" title="Permalink to this headline">¶</a></h3>
<p>The sorting preferences will be part of the table state that is passed
to our datasource method. The Table class supports sorting on more than
one column at a time by holding down the shift key to add additional
columns. As result, the sort parameter may have more than one sort
column</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1">// example sort parameter</span>
<span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;asc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;desc&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>For a MySql application you would simply add these sorts to Active
Record using the <code class="docutils literal"><span class="pre">order_by()</span></code> method. Since our example deals with
arrays, we will make use of PHP&#8217;s <a class="reference external" href="http://php.net/usort">usort()</a>
method. To do that we will need a custom sorting method, which requires
exposing the current sort as a class variable. Add this between your
<code class="docutils literal"><span class="pre">$rows</span></code> array and the datasource return value.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">sort</span> <span class="o">=</span> <span class="nv">$state</span><span class="p">[</span><span class="s1">&#39;sort&#39;</span><span class="p">];</span>
<span class="nb">usort</span><span class="p">(</span><span class="nv">$rows</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="nv">$this</span><span class="p">,</span> <span class="s1">&#39;_sort_rows&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>Of course we need an implementation for our <code class="docutils literal"><span class="pre">_sort_rows()</span></code> method that
supports sorting on multiple keys. If this method seems complex, don&#8217;t
worry, most of your applications will make use of Active Record.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">_sort_rows</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span>
<span class="p">{</span>
      <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">sort</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$dir</span><span class="p">)</span>
      <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nv">$a</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">===</span> <span class="nv">$b</span><span class="p">[</span><span class="nv">$key</span><span class="p">])</span>
              <span class="p">{</span>
                      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
              <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nv">$dir</span> <span class="o">==</span> <span class="s1">&#39;desc&#39;</span><span class="p">)</span>
      <span class="p">{</span>
                      <span class="k">return</span> <span class="p">(</span><span class="nv">$a</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nv">$b</span><span class="p">[</span><span class="nv">$key</span><span class="p">])</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
              <span class="k">else</span>
              <span class="p">{</span>
                      <span class="k">return</span> <span class="p">(</span><span class="nv">$a</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nv">$b</span><span class="p">[</span><span class="nv">$key</span><span class="p">])</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you reload the page, you should now have clickable headers that sort
your table dynamically using the information from your datasource. One
small detail that would be nice is to have an initial sort on our name
column. We can add defaults to our datasource by passing them as a
parameter. The default options parameter will be of the same format as
the current table state. This keeps the parameters you pass and receive
largely consistent. So adding a default sort is as simple as passing a
sort order.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$defaults</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;asc&#39;</span><span class="p">)</span>
<span class="p">);</span>

<span class="nv">$data</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">datasource</span><span class="p">(</span><span class="s1">&#39;_datasource&#39;</span><span class="p">,</span> <span class="nv">$defaults</span><span class="p">);</span>
</pre></div>
</div>
<p>Do some experimenting with the <code class="docutils literal"><span class="pre">$defaults</span></code> array. Try including a
secondary sort on the size column. Also try adding a default offset,
like the one we retrieved from <code class="docutils literal"><span class="pre">$state</span></code> in our pagination code.</p>
</div>
<div class="section" id="filtering">
<h3>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h3>
<p>As a last step you can add dynamic filtering to our table. To make this
work you will need to write some javascript. The <a class="reference internal" href="../../cp_javascript/table.html"><span class="doc">table plugin</span></a> will provide simple access to
everything you need to do.</p>
<p>At this point it becomes easier to work with a database. The filtering
information will be added to your <code class="docutils literal"><span class="pre">$state</span></code> array. Doing a like query
will let you fetch the correct information.</p>
</div>
</div>
<div class="section" id="method-reference">
<h2><a class="toc-backref" href="#id3">Method Reference</a><a class="headerlink" href="#method-reference" title="Permalink to this headline">¶</a></h2>
<p>This documents the ExpressionEngine additions to the table class. Refer
to the <a class="reference external" href="https://ellislab.com/codeigniter/user-guide/libraries/table.html">HTML Table</a> documentation in the
CodeIgniter user guide for the base table class reference.</p>
<dl class="method">
<dt id="Table::datasource">
<code class="descclassname">Table::</code><code class="descname">datasource</code><span class="sig-paren">(</span><em>$func</em><span class="optional">[</span>, <em>$options = array()</em><span class="optional">[</span>, <em>$params = array()</em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Table::datasource" title="Permalink to this definition">¶</a></dt>
<dd><p>This method lets you define a datasource for your table contents.
When called asynchronously, the request will stop here and the table
data will be returned as JSON.</p>
<p>Example Usage:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$custom_params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;my_key&#39;</span> <span class="o">=&gt;</span> <span class="nv">$my_value</span><span class="p">);</span>
<span class="nv">$default_state</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;asc&#39;</span><span class="p">));</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">datasource</span><span class="p">(</span><span class="s1">&#39;_source&#39;</span><span class="p">,</span> <span class="nv">$default_state</span><span class="p">,</span> <span class="nv">$custom_params</span><span class="p">);</span>

<span class="k">function</span> <span class="nf">_source</span><span class="p">(</span><span class="nv">$state</span><span class="p">,</span> <span class="nv">$params</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// do work</span>

  <span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;rows&#39;</span> <span class="o">=&gt;</span> <span class="nv">$rows</span><span class="p">,</span>
    <span class="s1">&#39;pagination&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">&#39;total_rows&#39;</span> <span class="o">=</span> <span class="nv">$total</span>
    <span class="p">)</span>
  <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$func</strong> (<em>string</em>) &#8211; Name of the callback function</li>
<li><strong>$options</strong> (<em>array</em>) &#8211; Default state of the data table</li>
<li><strong>$params</strong> (<em>array</em>) &#8211; Initial parameters to pass to the callback</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>Array containing the rendered table and pagination to prime
your view:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="s1">&#39;table_html&#39;</span>      <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nx">Rendered</span> <span class="nx">Table</span><span class="p">,</span>
<span class="s1">&#39;pagination_html&#39;</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nx">Rendered</span> <span class="nx">Pagination</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Table::set_base_url">
<code class="descclassname">Table::</code><code class="descname">set_base_url</code><span class="sig-paren">(</span><em>$url</em><span class="sig-paren">)</span><a class="headerlink" href="#Table::set_base_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the callback url. Usually this can be auto discovered, but
sometimes providing it manually is more robust.</p>
<p>Example Usage:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">set_base_url</span><span class="p">(</span><span class="s1">&#39;C=addons_modules&amp;M=show_module_cp&amp;module=example&#39;</span><span class="p">);</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$url</strong> (<em>string</em>) &#8211; The callback URL if it&#8217;s not discovered
automatically</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Void</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Table::set_columns">
<code class="descclassname">Table::</code><code class="descname">set_columns</code><span class="sig-paren">(</span><em>$cols = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#Table::set_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the table columns and their behavior.</p>
<p>Example Usage:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">set_columns</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;name&#39;</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;header&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Name&#39;</span><span class="p">),</span>
    <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;header&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Color&#39;</span><span class="p">),</span>
    <span class="s1">&#39;size&#39;</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;header&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Size&#39;</span><span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$cols</strong> (<em>array</em>) &#8211; <p>Associative array that defines the columns and
behavior</p>
<ul>
<li><code class="docutils literal"><span class="pre">header</span></code> - (<code class="docutils literal"><span class="pre">string</span></code>) Heading Contents</li>
<li><code class="docutils literal"><span class="pre">sort</span></code> - (<code class="docutils literal"><span class="pre">bool</span></code>) Allow Sorting [default = <code class="docutils literal"><span class="pre">true</span></code>]</li>
<li><code class="docutils literal"><span class="pre">html</span></code> - (<code class="docutils literal"><span class="pre">bool</span></code>) Allow HTML [default = <code class="docutils literal"><span class="pre">true</span></code>]</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Void</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Table::set_data">
<code class="descclassname">Table::</code><code class="descname">set_data</code><span class="sig-paren">(</span><em>$table_data = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#Table::set_data" title="Permalink to this definition">¶</a></dt>
<dd><p>If you only need single page sorting, this method lets you set the
named column data directly</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nx">ee</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">table</span><span class="o">-&gt;</span><span class="na">set_data</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Fred&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Blue&#39;</span><span class="p">,</span>  <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Small&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Mary&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Red&#39;</span><span class="p">,</span>   <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Large&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Green&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Medium&#39;</span><span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$table_data</strong> (<em>array</em>) &#8211; Array containing table data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Void</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>

						</div>
						<div class="docs-footer">
							<p><a href="https://expressionengine.com/support/bugs/new">Report a problem with this page</a><br>
								ExpressionEngine<b class="reg-mark">&reg;</b> 4.0.0-dp.2 User Guide<br><span>&copy;2002–2017 <a href="https://ellislab.com/" rel="external">EllisLab, Inc.</a></span></p>
							<p><a class="scroll" href="#top"></a></p>
						</div>

					</div>
				</section>

				<section class="w-4 fixed-col" id="docs-nav">
					<div class="box docs-sidebar">
						<form class="docs-search" method="get" action="https://docs.expressionengine.com/search/latest/">
							<input type="text" name="q" id="q" placeholder="search eecms docs">
						</form>

						<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation &amp; Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cp/index.html">The Control Panel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../add-ons/index.html">Add-Ons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../channel/index.html">Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../comment/index.html">Comment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fieldtypes/index.html">Fieldtypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../member/index.html">Member Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../msm/index.html">Multiple Site Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../optimization/index.html">Optimizing ExpressionEngine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Securing ExpressionEngine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../templates/index.html">Template Language Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../urls/index.html">URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../how_to/index.html">How-To Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Add-On Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../v4_addon_migration.html">v4 Add-on Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v3_addon_migration/index.html">v3 Add-on Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../addon_setup_php_file.html">The <code class="docutils literal"><span class="pre">addon.setup.php</span></code> File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../core/index.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../services/index.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shared_form_view.html">Shared Form View</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../constants.html">Constants Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions.html">Extensions Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../fieldtypes.html">Fieldtypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rte_tools.html">RTE Tools API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cp_javascript/index.html">Control Panel Javascript Reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Legacy Reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../database/index.html">Database Driver</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Libraries</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="benchmark.html">Benchmarking Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="cache.html">Cache Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="config.html">Config Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="cp.html">CP Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="creating_libraries.html">Creating Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html">Database Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="email.html">Email Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="file_field.html">File Field Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="file_uploading.html">File Uploading Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="form_validation.html">Form Validation Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="functions.html">Functions Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="image_lib.html">Image Manipulation Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="input.html">Input Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="javascript.html">Javascript Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="language.html">Language Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="layout.html">Layout Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="loader.html">Loader Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="localization.html">Localize Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="logger.html">Logger Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="mime_type.html">Mime Type Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="output.html">Output Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="pagination.html">Pagination Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="rss_parser.html">RSS Parser Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html">Security Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="session.html">Session Class</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Table Class</a><ul class="simple">
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="template.html">Template Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="typography.html">Typography Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="uri.html">URI Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="xmlparser.html">XML Parser Class</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../helpers/index.html">Helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../models.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../controllers.html">Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../drivers.html">Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html">Legacy API Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common_functions.html">Common Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../guidelines/index.html">Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/tree_datastructure.html">Tree Datastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../emoticons.html">Emoticon Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer_preview_program.html">Developer Preview Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../json_version_feed.html">JSON Version Feed</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../general/index.html">General Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bugs_and_security_reports/index.html">Bugs and Security Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/changelog.html">ExpressionEngine 4.x Change Log</a></li>
</ul>

					</div>
				</section>
			</section>
		</section>
		<script type="text/javascript" src="../../../_static/jquery.js"></script>
		<script type="text/javascript" src="../../../_static/underscore.js"></script>
		<script type="text/javascript" src="../../../_static/doctools.js"></script>
		<script type="text/javascript" src="../../../_static/asset/js/common.js"></script>
		<script>
		!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
		n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
		n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
		t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
		document,'script','https://connect.facebook.net/en_US/fbevents.js');
		fbq('init', '565259520351602'); // Insert your pixel ID here.
		fbq('track', 'PageView');
		</script>
		<noscript><img height="1" width="1" style="display:none"
		src="https://www.facebook.com/tr?id=565259520351602&ev=PageView&noscript=1"
		/></noscript>
	</body>
</html>