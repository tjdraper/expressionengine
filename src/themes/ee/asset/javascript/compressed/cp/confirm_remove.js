/**
 * ExpressionEngine (https://expressionengine.com)
 *
 * @link      https://expressionengine.com/
 * @copyright Copyright (c) 2003-2018, EllisLab, Inc. (https://ellislab.com)
 * @license   https://expressionengine.com/license
 */
$(document).ready(function(){$("body").on("click","*[data-conditional-modal]",function(t){var e=$(this).data("conditional-modal"),i=$(this).data("confirm-ajax"),a=$(this).data("confirm-text"),n=$(this).data("confirm-input"),l=$("*[data-"+e+"]").closest("select").get(0),d=$(l.options[l.selectedIndex]);if($(d).data(e)&&$(d).prop($(d).data(e))){t.preventDefault();var o="."+$(d).attr("rel"),c=$(o+", [rel="+$(d).attr("rel")+"]");$(o+" .checklist").html(""),"undefined"!=typeof a&&$(o+" .checklist").append("<li>"+a+"</li>");var r=$(this).parents("form").find("th input:checked, td input:checked, li input:checked");if(r=r.filter(function(t,e){return void 0!==$(e).attr("value")}),"modal-bulk-edit"==d.attr("rel"))return EE.cp.BulkEdit.openForm(d.val(),r);r.length<6?r.each(function(){$(o+" .checklist").append("<li>"+$(this).attr("data-confirm")+"</li>")}):$(o+" .checklist").append("<li>"+EE.lang.remove_confirm.replace("###",r.length)+"</li>"),r.each(function(){$(o+" .checklist li:last").append($("<input/>").attr({type:"hidden",name:$(this).attr("name"),value:$(this).val()}))}),"undefined"!=typeof n&&$("input[name='"+n+"']").each(function(){$(o+" .checklist li:last").append($("<input/>").attr({type:"hidden",name:$(this).attr("name"),value:$(this).val()}))}),$(o+" .checklist li:last").addClass("last"),"undefined"!=typeof i&&$.post(i,$(o+" form").serialize(),function(t){$(o+" .ajax").html(t),SelectField.renderFields()}),c.trigger("modal:open")}})}),EE.cp.Modal={openConfirmRemove:function(t,e,i,a){var n=$(".modal-default-confirm-remove"),l=n.find("form"),d=n.find('input[name="content_id"]');$(".checklist",n).html("").append("<li>"+e+"</li>"),d.val(i),l.attr("action",t),n.trigger("modal:open"),n.find("form").submit(function(){return $.post(this.action,$(this).serialize(),function(t){n.trigger("modal:close"),a(t)}),!1})}};